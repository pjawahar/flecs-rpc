CONFIGURE_FILE (config.server ${CMAKE_CURRENT_BINARY_DIR}/ COPYONLY)

ADD_CUSTOM_COMMAND (OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/../flecs.h ${CMAKE_CURRENT_BINARY_DIR}/../flecs.cpp
		COMMAND slice2cpp --output-dir=${CMAKE_CURRENT_BINARY_DIR}/.. ${CMAKE_CURRENT_SOURCE_DIR}/../flecs.ice
		DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/../flecs.ice )

INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_BINARY_DIR}/.. )

ADD_EXECUTABLE ( server server-main.cpp ${CMAKE_CURRENT_BINARY_DIR}/../flecs.cpp c2sI.cpp s2sI.cpp )
TARGET_LINK_LIBRARIES (server Ice IceUtil)
